<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <meta name="description" content="Checkout paket undangan digital Momen Kita - Pilih metode pembayaran yang nyaman">
  <meta name="theme-color" content="#F4EEE4"/>
  
  <title>Checkout Paket â€” Momen Kita</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- Alpine -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- AOS Animation -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <!-- Styles khusus checkout -->
  <link rel="stylesheet" href="checkout.css"/>
</head>

<body>
  <!-- Loading Screen -->
  <div id="loading-screen" class="fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-sand-25 to-sand-50 transition-opacity duration-500">
    <div class="text-center">
      <div class="relative w-16 h-16 mx-auto mb-4">
        <div class="absolute inset-0 border-4 border-sand-200 rounded-full"></div>
        <div class="absolute inset-0 border-4 border-sand-500 rounded-full border-t-transparent animate-spin"></div>
        <div class="absolute inset-2 bg-sand-500 rounded-full flex items-center justify-center">
          <i class="fas fa-lock text-white text-sm"></i>
        </div>
      </div>
      <p class="text-sand-700 font-medium">Memuat halaman pembayaran...</p>
    </div>
  </div>

  <!-- Floating Elements -->
  <div class="fixed inset-0 pointer-events-none overflow-hidden z-0">
    <div class="absolute top-20 left-10 w-32 h-32 bg-sand-200 rounded-full opacity-10 animate-float"></div>
    <div class="absolute top-40 right-20 w-24 h-24 bg-sand-300 rounded-full opacity-10 animate-float-delayed"></div>
    <div class="absolute bottom-20 left-1/4 w-28 h-28 bg-sand-200 rounded-full opacity-10 animate-float"></div>
  </div>

  <!-- Header -->
  <header id="site-header" x-data="{open:false}" class="site-header relative z-40">
    <div class="container">
      <div class="nav-row">
        <a href="index.html" class="brand flex items-center gap-2 group">
          <div class="w-8 h-8 bg-gradient-to-br from-sand-500 to-sand-600 rounded-full flex items-center justify-center transform transition-transform group-hover:scale-110">
            <i class="fas fa-heart text-white text-xs"></i>
          </div>
          <span>Momen Kita</span>
        </a>

        <nav class="nav-links md:flex hidden">
          <a href="index.html#fitur" class="nav-link relative group">
            <span>Fitur</span>
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-sand-500 transition-all group-hover:w-full"></span>
          </a>
          <a href="index.html#desain" class="nav-link relative group">
            <span>Desain</span>
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-sand-500 transition-all group-hover:w-full"></span>
          </a>
          <a href="index.html#harga" class="nav-link relative group">
            <span>Harga</span>
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-sand-500 transition-all group-hover:w-full"></span>
          </a>
          <a href="index.html#kontak" class="nav-link relative group">
            <span>Kontak</span>
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-sand-500 transition-all group-hover:w-full"></span>
          </a>
        </nav>

        <a href="index.html#harga" class="btn-pill md:inline-flex hidden items-center gap-2 group">
          <i class="fas fa-arrow-left text-sm group-hover:-translate-x-0.5 transition-transform"></i>
          <span>Kembali ke Paket</span>
        </a>

        <button class="md:hidden menu-btn" @click="open=!open" aria-label="Buka menu">
          <div class="w-6 h-5 relative flex flex-col justify-center">
            <span class="absolute h-0.5 w-6 bg-current transform transition-all" 
                  :class="open ? 'rotate-45 translate-y-0' : '-translate-y-2'"></span>
            <span class="absolute h-0.5 w-6 bg-current transition-all" 
                  :class="open ? 'opacity-0' : ''"></span>
            <span class="absolute h-0.5 w-6 bg-current transform transition-all" 
                  :class="open ? '-rotate-45 translate-y-0' : 'translate-y-2'"></span>
          </div>
        </button>
      </div>

      <!-- Mobile menu -->
      <div class="md:hidden overflow-hidden transition-all duration-300" 
           :style="open ? 'max-height: 300px' : 'max-height: 0'">
        <nav class="mobile-links py-4">
          <a href="index.html#fitur" class="nav-link block py-2">Fitur</a>
          <a href="index.html#desain" class="nav-link block py-2">Desain</a>
          <a href="index.html#harga" class="nav-link block py-2">Harga</a>
          <a href="index.html#kontak" class="nav-link block py-2">Kontak</a>
          <a href="index.html#harga" class="btn-pill text-center mt-2 inline-block">
            <i class="fas fa-arrow-left text-sm mr-2"></i>
            Kembali ke Paket
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Breadcrumb -->
  <div class="container mt-4 mb-2">
    <nav class="flex text-sm text-sand-500" aria-label="Breadcrumb">
      <a href="index.html" class="hover:text-sand-700 transition-colors">Beranda</a>
      <span class="mx-2">/</span>
      <a href="index.html#harga" class="hover:text-sand-700 transition-colors">Paket</a>
      <span class="mx-2">/</span>
      <span class="text-sand-700 font-medium">Checkout</span>
    </nav>
  </div>

  <!-- ====== MAIN ====== -->
  <main class="relative z-10">
    <section class="section pt-6 pb-20">
      <div class="container">
        <!-- Progress Steps -->
        <div class="flex justify-center mb-10" data-aos="fade-down">
          <div class="flex items-center gap-4">
            <div class="step-item completed">
              <div class="step-circle">
                <i class="fas fa-check text-xs"></i>
              </div>
              <span class="step-label">Pilih Paket</span>
            </div>
            <div class="step-line"></div>
            <div class="step-item active">
              <div class="step-circle">2</div>
              <span class="step-label">Pembayaran</span>
            </div>
            <div class="step-line"></div>
            <div class="step-item">
              <div class="step-circle">3</div>
              <span class="step-label">Konfirmasi</span>
            </div>
          </div>
        </div>

        <h1 class="section-title text-center" data-aos="fade-up">Pilih Metode Pembayaran</h1>
        <p class="text-center text-sand-600 mb-8 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
          Pilih metode pembayaran yang paling nyaman untuk Anda. Semua transaksi aman dan terenkripsi.
        </p>

        <div class="checkout-stack">
          <!-- Ringkasan (di atas, tengah) -->
          <aside class="checkout-card" data-aos="fade-right" data-aos-delay="200">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-12 h-12 bg-gradient-to-br from-sand-100 to-sand-200 rounded-full flex items-center justify-center">
                <i class="fas fa-file-invoice text-sand-600"></i>
              </div>
              <div>
                <h2 class="card-title">Ringkasan Paket</h2>
                <p class="text-sm text-sand-500">ID: #INV<span id="invoice-id"></span></p>
              </div>
            </div>

            <div class="space-y-3">
              <div class="row">
                <span class="flex items-center gap-2">
                  <i class="fas fa-box text-sand-400 text-sm"></i>
                  Paket
                </span>
                <strong id="sum-plan" class="text-sand-800">-</strong>
              </div>
              <div class="row">
                <span class="flex items-center gap-2">
                  <i class="fas fa-tag text-sand-400 text-sm"></i>
                  Harga
                </span>
                <strong id="sum-price" class="text-sand-800">-</strong>
              </div>
              <div class="row">
                <span class="flex items-center gap-2">
                  <i class="fas fa-percentage text-sand-400 text-sm"></i>
                  Diskon
                </span>
                <strong class="text-green-600">Rp 0</strong>
              </div>
            </div>

            <div class="divider"></div>

            <div class="row total">
              <span class="flex items-center gap-2">
                <i class="fas fa-calculator text-sand-500"></i>
                Total
              </span>
              <strong id="sum-total" class="text-sand-900">-</strong>
            </div>

            <div class="mt-4 p-3 bg-sand-50 rounded-lg">
              <p class="help flex items-start gap-2">
                <i class="fas fa-shield-alt text-sand-500 mt-0.5"></i>
                <span>Pilih metode pembayaran di bawah, lalu konfirmasi via WhatsApp untuk proses verifikasi.</span>
              </p>
            </div>

            <div class="space-y-3 mt-6">
              <a id="btn-wa" target="_blank" href="#" class="btn-pill w-full block text-center group">
                <i class="fab fa-whatsapp mr-2 group-hover:scale-110 transition-transform"></i>
                Konfirmasi via WhatsApp
                <i class="fas fa-arrow-right ml-2 text-sm group-hover:translate-x-0.5 transition-transform"></i>
              </a>

              <a href="index.html#harga" class="btn-soft w-full block text-center group">
                <i class="fas fa-arrow-left mr-2 group-hover:-translate-x-0.5 transition-transform"></i>
                Kembali ke Paket
              </a>
            </div>
          </aside>

          <!-- Grid pembayaran (lebih besar & nyaman) -->
          <div class="pay-wrap" data-aos="fade-left" data-aos-delay="300">
            <div class="mb-6">
              <h3 class="text-lg font-semibold text-sand-800 mb-2">Metode Pembayaran</h3>
              <p class="text-sm text-sand-600">Pilih salah satu metode pembayaran di bawah ini</p>
            </div>
            
            <div class="pay-grid">
              <label class="bank-card group">
                <input type="radio" name="pay" value="QRIS" />
                <div class="bank-icon">
                  <img src="images/QRIS.png" alt="QRIS"/>
                </div>
                <div class="bank-info">
                  <span>QRIS</span>
                  <small>Scan & Bayar</small>
                </div>
                <div class="check-indicator">
                  <i class="fas fa-check"></i>
                </div>
              </label>

              <label class="bank-card group">
                <input type="radio" name="pay" value="BNI" />
                <div class="bank-icon">
                  <img src="images/BNI.png" alt="BNI"/>
                </div>
                <div class="bank-info">
                  <span>BNI</span>
                  <small>Virtual Account</small>
                </div>
                <div class="check-indicator">
                  <i class="fas fa-check"></i>
                </div>
              </label>

              <label class="bank-card group">
                <input type="radio" name="pay" value="BRI" />
                <div class="bank-icon">
                  <img src="images/BRI.png" alt="BRI"/>
                </div>
                <div class="bank-info">
                  <span>BRI</span>
                  <small>Virtual Account</small>
                </div>
                <div class="check-indicator">
                  <i class="fas fa-check"></i>
                </div>
              </label>

              <label class="bank-card group">
                <input type="radio" name="pay" value="BCA" />
                <div class="bank-icon">
                  <img src="images/BCA.png" alt="BCA"/>
                </div>
                <div class="bank-info">
                  <span>BCA</span>
                  <small>Virtual Account</small>
                </div>
                <div class="check-indicator">
                  <i class="fas fa-check"></i>
                </div>
              </label>

              <label class="bank-card group">
                <input type="radio" name="pay" value="MANDIRI" />
                <div class="bank-icon">
                  <img src="images/Mandiri.webp" alt="Mandiri"/>
                </div>
                <div class="bank-info">
                  <span>Mandiri</span>
                  <small>Virtual Account</small>
                </div>
                <div class="check-indicator">
                  <i class="fas fa-check"></i>
                </div>
              </label>
            </div>

            <!-- Security Badge -->
            <div class="mt-8 flex items-center justify-center gap-6 text-xs text-sand-500">
              <div class="flex items-center gap-1">
                <i class="fas fa-lock text-green-500"></i>
                <span>SSL Encrypted</span>
              </div>
              <div class="flex items-center gap-1">
                <i class="fas fa-shield-alt text-green-500"></i>
                <span>Secure Payment</span>
              </div>
              <div class="flex items-center gap-1">
                <i class="fas fa-certificate text-green-500"></i>
                <span>Verified</span>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>
  </main>

  <!-- Footer selalu di bawah -->
  <footer class="footer">
    <div class="container text-center text-white">
      <div class="flex items-center justify-center gap-2 mb-2">
        <i class="fas fa-heart text-red-500 text-xs animate-pulse"></i>
        <p>&copy; 2025 Momen Kita. All rights reserved.</p>
      </div>
      <p class="text-xs text-sand-400">Payment processed securely</p>
    </div>
  </footer>

  <!-- AOS Animation -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <!-- Enhanced Script -->
  <script>
    // Initialize AOS
    AOS.init({
      duration: 800,
      once: true,
      offset: 50,
      easing: 'ease-out-cubic'
    });

    // Loading Screen
    window.addEventListener('load', () => {
      setTimeout(() => {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
          loadingScreen.classList.add('hidden');
          setTimeout(() => {
            loadingScreen.style.display = 'none';
          }, 500);
        }
      }, 1200);
    });

    // Generate Invoice ID
    function generateInvoiceId() {
      const timestamp = Date.now().toString(36).toUpperCase();
      const random = Math.random().toString(36).substring(2, 6).toUpperCase();
      return timestamp + random;
    }

    document.getElementById('invoice-id').textContent = generateInvoiceId();

    // Header shrink with smooth transition
    (function(){
      const header = document.getElementById('site-header');
      let lastScrollY = 0;
      let ticking = false;

      function updateHeader() {
        const scrollY = window.scrollY;
        
        if (scrollY > 50) {
          header.classList.add('is-scrolled');
        } else {
          header.classList.remove('is-scrolled');
        }
        
        lastScrollY = scrollY;
        ticking = false;
      }

      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(updateHeader);
          ticking = true;
        }
      }

      window.addEventListener('scroll', requestTick, { passive: true });
      updateHeader();
    })();

    // Package data from URL
    const params = new URLSearchParams(location.search);
    const plan = (params.get('plan') || 'silver').toLowerCase();
    const priceMap = { 
      bronze: { price: 100000, name: 'Bronze', icon: 'ðŸ¥‰' },
      silver: { price: 150000, name: 'Silver', icon: 'ðŸ¥ˆ' },
      gold: { price: 250000, name: 'Gold', icon: 'ðŸ¥‡' }
    };

    const packageData = priceMap[plan] || priceMap.silver;

    // Format currency
    function formatRupiah(amount) {
      return new Intl.NumberFormat('id-ID', {
        style: 'currency',
        currency: 'IDR',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(amount);
    }

    // Update summary with animation
    function updateSummary() {
      const sumPlan = document.getElementById('sum-plan');
      const sumPrice = document.getElementById('sum-price');
      const sumTotal = document.getElementById('sum-total');

      // Animate number counting
      function animateValue(element, start, end, duration) {
        const startTimestamp = Date.now();
        const step = () => {
          const timestamp = Date.now();
          const progress = Math.min((timestamp - startTimestamp) / duration, 1);
          const currentValue = Math.floor(progress * (end - start) + start);
          element.textContent = formatRupiah(currentValue);
          if (progress < 1) {
            window.requestAnimationFrame(step);
          }
        };
        window.requestAnimationFrame(step);
      }

      // Update package name with icon
      sumPlan.innerHTML = `${packageData.icon} ${packageData.name}`;
      
      // Animate price
      setTimeout(() => {
        animateValue(sumPrice, 0, packageData.price, 800);
        animateValue(sumTotal, 0, packageData.price, 800);
      }, 300);
    }

    updateSummary();

    // Payment method selection with enhanced interactions
    const radios = document.querySelectorAll('input[name="pay"]');
    const btnWA = document.getElementById('btn-wa');
    let selectedPayment = 'QRIS';

    function updateWhatsAppLink() {
      const chosen = selectedPayment;
      const invoiceId = document.getElementById('invoice-id').textContent;
      const msg = `Halo, saya ingin konfirmasi pembayaran:\n\nðŸ“‹ Invoice: #INV${invoiceId}\nðŸ“¦ Paket: ${packageData.name}\nðŸ’° Harga: ${formatRupiah(packageData.price)}\nðŸ’³ Metode: ${chosen}\n\nMohon informasi rekening untuk pembayaran. Terima kasih.`;
      
      btnWA.href = `https://wa.me/62811456999?text=${encodeURIComponent(msg)}`;
      
      // Add ripple effect to button
      createRipple(btnWA);
    }

    function createRipple(button) {
      const ripple = document.createElement('span');
      ripple.classList.add('ripple');
      button.appendChild(ripple);
      
      setTimeout(() => {
        ripple.remove();
      }, 600);
    }

    // Enhanced radio button interactions
    radios.forEach((radio, index) => {
      // Add stagger animation on load
      setTimeout(() => {
        radio.closest('.bank-card').style.animation = 'slide-up 0.5s ease-out';
      }, index * 100);
      
      radio.addEventListener('change', (e) => {
        // Remove selected class from all cards
        document.querySelectorAll('.bank-card').forEach(card => {
          card.classList.remove('is-selected');
        });
        
        // Add selected class to current card
        const selectedCard = e.target.closest('.bank-card');
        selectedCard.classList.add('is-selected');
        
        // Update selected payment
        selectedPayment = e.target.value;
        
        // Update WhatsApp link
        updateWhatsAppLink();
        
        // Add haptic feedback (if supported)
        if (navigator.vibrate) {
          navigator.vibrate(50);
        }
      });
    });

    // Set default selection with animation
    setTimeout(() => {
      radios[0].checked = true;
      radios[0].dispatchEvent(new Event('change'));
    }, 500);

    // Add keyboard navigation
    document.addEventListener('keydown', (e) => {
      const currentIndex = Array.from(radios).findIndex(r => r.checked);
      
      if (e.key === 'ArrowRight' && currentIndex < radios.length - 1) {
        radios[currentIndex + 1].checked = true;
        radios[currentIndex + 1].dispatchEvent(new Event('change'));
      } else if (e.key === 'ArrowLeft' && currentIndex > 0) {
        radios[currentIndex - 1].checked = true;
        radios[currentIndex - 1].dispatchEvent(new Event('change'));
      }
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  </script>
</body>
</html>